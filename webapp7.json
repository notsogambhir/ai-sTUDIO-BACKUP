{
  "pages/TeacherManagement.tsx": "/**\n * @file TeacherManagement.tsx\n * @description\n * This component is the main page for managing teachers. It's primarily used by\n * Program Co-ordinators and Department Heads.\n *\n * What it does:\n * 1.  **Displays Teachers**: It shows a table of teachers.\n * 2.  **Role-Based Filtering**: The list of teachers is filtered based on the user's role:\n *     - A **Program Co-ordinator** sees only the teachers that are assigned to them.\n *     - A **Department Head** sees all teachers who belong to any of the Program Co-ordinators\n *       within their department.\n * 3.  **Search**: Provides a search bar to filter teachers by name or employee ID.\n * 4.  **Status Management**: Allows authorized users to change a teacher's status ('Active' or 'Inactive').\n * 5.  **Navigation**: Provides a \"View Dashboard\" link for each teacher, which navigates\n *     to the `TeacherDetails` page for that specific teacher.\n */\n\nimport React, { useMemo, useState } from 'react';\nimport { useAppContext } from '../hooks/useAppContext';\nimport { Link } from 'react-router-dom';\nimport ConfirmationModal from '../components/ConfirmationModal';\nimport { User } from '../types';\n\nconst TeacherManagement: React.FC = () => {\n    // We get our app's data, tools, and the current user from the \"magic backpack\".\n    const { data, setData, currentUser } = useAppContext();\n    // A piece of memory for what the user has typed in the search bar.\n    const [searchTerm, setSearchTerm] = useState('');\n    // A piece of memory for the \"Are you sure?\" confirmation popup.\n    const [confirmation, setConfirmation] = useState<{\n        isOpen: boolean;\n        title: string;\n        message: string;\n        onConfirm: () => void;\n    } | null>(null);\n\n    /**\n     * `useMemo` is a performance helper. It calculates the list of teachers to display\n     * and only recalculates it if the data, user, or search term changes.\n     */\n    const managedTeachers = useMemo(() => {\n        if (!currentUser) return [];\n\n        let teachers: User[] = [];\n\n        // --- Role-Based Filtering Logic ---\n        if (currentUser.role === 'Program Co-ordinator') {\n            // A PC sees teachers whose `programCoordinatorIds` array includes the PC's own ID.\n            teachers = data.users.filter(u => u.role === 'Teacher' && u.programCoordinatorIds?.includes(currentUser.id));\n        } else if (currentUser.role === 'Department') {\n            // A Department Head first finds all the PCs that belong to them.\n            const pcsInDepartment = data.users.filter(u => u.role === 'Program Co-ordinator' && u.departmentId === currentUser.id);\n            const pcIds = new Set(pcsInDepartment.map(pc => pc.id));\n            // Then, they find all teachers who are managed by any of those PCs.\n            teachers = data.users.filter(u => u.role === 'Teacher' && (u.programCoordinatorIds || []).some(id => pcIds.has(id)));\n        }\n\n        // --- Search Filter ---\n        if (searchTerm) {\n            const lowercasedFilter = searchTerm.toLowerCase();\n            teachers = teachers.filter(teacher =>\n                teacher.name.toLowerCase().includes(lowercasedFilter) ||\n                teacher.employeeId.toLowerCase().includes(lowercasedFilter)\n            );\n        }\n        \n        return teachers;\n    }, [data.users, currentUser, searchTerm]);\n\n    // This function is called when a user changes a teacher's status in the dropdown.\n    const handleStatusChange = (teacherId: string, status: 'Active' | 'Inactive') => {\n        // It opens the confirmation popup first.\n        setConfirmation({\n            isOpen: true,\n            title: \"Confirm Status Change\",\n            message: \"Are you sure you want to change this teacher's status?\",\n            onConfirm: () => {\n                // Only if the user confirms do we update the main application data.\n                setData(prev => ({\n                    ...prev,\n                    users: prev.users.map(u => u.id === teacherId ? { ...u, status } : u)\n                }));\n                setConfirmation(null); // Close the popup.\n            }\n        });\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <h1 className=\"text-3xl font-bold text-gray-800\">Teacher Management</h1>\n            <p className=\"text-gray-500\">Manage teachers and course assignments for your program.</p>\n            \n            <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n                <div className=\"p-4 border-b\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search by Teacher Name or Employee ID...\"\n                    value={searchTerm}\n                    onChange={e => setSearchTerm(e.target.value)}\n                    className=\"w-full p-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:ring-indigo-500 focus:border-indigo-500\"\n                  />\n                </div>\n                <table className=\"min-w-full\">\n                    <thead className=\"bg-gray-50\">\n                        <tr>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Teacher Name</th>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Employee ID</th>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                            <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-200\">\n                        {managedTeachers.length > 0 ? (\n                            managedTeachers.map(teacher => (\n                                <tr key={teacher.id} className=\"hover:bg-gray-50\">\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                                        {teacher.name}\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                        {teacher.employeeId}\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                                        <select\n                                            value={teacher.status}\n                                            onChange={(e) => handleStatusChange(teacher.id, e.target.value as 'Active' | 'Inactive')}\n                                            className={`p-1 border rounded-md bg-white text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 ${teacher.status === 'Active' ? 'border-green-300' : 'border-red-300'}`}\n                                        >\n                                            <option value=\"Active\">Active</option>\n                                            <option value=\"Inactive\">Inactive</option>\n                                        </select>\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                                        {/* This `Link` component from React Router navigates to the teacher's detail page. */}\n                                        <Link to={`/teachers/${teacher.id}`} className=\"text-indigo-600 hover:text-indigo-800 font-semibold\">\n                                            View Dashboard\n                                        </Link>\n                                    </td>\n                                </tr>\n                            ))\n                        ) : (\n                             <tr>\n                                <td colSpan={4} className=\"text-center py-8 text-gray-500\">\n                                    No teachers found.\n                                </td>\n                            </tr>\n                        )}\n                    </tbody>\n                </table>\n            </div>\n\n            {/* The confirmation modal is only rendered if it has been activated. */}\n            {confirmation && (\n                <ConfirmationModal \n                    isOpen={confirmation.isOpen}\n                    title={confirmation.title}\n                    message={confirmation.message}\n                    onConfirm={confirmation.onConfirm}\n                    onClose={() => setConfirmation(null)}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default TeacherManagement;",
  "backend_guide.md": "# Backend Development Guide: NBA OBE Portal (Django REST Framework & Docker)\\n\\nThis document provides a comprehensive, step-by-step guide for building the backend server for the NBA OBE Portal frontend. The recommended stack is **Django**, **Django REST Framework (DRF)**, **PostgreSQL**, and **Docker**.\\n\\nThe primary goal is to replace the `mockData.json` file and all client-side `setData` calls with live API requests to this backend.\\n\\n**New Backend Assets**: As a concrete implementation example, refer to the following files:\\n- **`schema.sql.txt`**: Contains `CREATE TABLE` statements for a PostgreSQL database.\\n- **`data_insertion.sql.txt`**: Contains `INSERT` statements to populate the database with the mock data.\\n\\n---\\n\\n## **Table of Contents**\\n\\n1.  [Technology Stack](#1-technology-stack)\\n2.  [Step 1: Project Setup](#2-step-1-project-setup)\\n3.  [Step 2: Dockerization](#3-step-2-dockerization)\\n4.  [Step 3: Running the Development Environment](#4-step-3-running-the-development-environment)\\n5.  [Step 4: Models & Migrations](#5-step-4-models--migrations)\\n6.  [Step 5: Seeding Initial Data](#6-step-5-seeding-initial-data)\\n7.  [Step 6: Serializers](#7-step-6-serializers)\\n8.  [Step 7: Views, ViewSets, & Filtering Logic](#8-step-7-views-viewsets--filtering-logic)\\n9.  [Step 8: URLs & Routing](#9-step-8-urls--routing)\\n10. [Step 9: Authentication & Permissions](#10-step-9-authentication--permissions)\\n11. [Step 10: API Endpoint Cheatsheet](#11-step-10-api-endpoint-cheatsheet)\\n12. [Step 11: Frontend Refactoring Strategy](#12-step-11-frontend-refactoring-strategy)\\n13. [Step 12: Deployment Considerations](#13-step-12-deployment-considerations)\\n\\n---\\n\\n## 1. Technology Stack\\n\\n*   **Backend Framework**: Django\\n*   **API Toolkit**: Django REST Framework (DRF)\\n*   **Database**: PostgreSQL\\n*   **Containerization**: Docker, Docker Compose\\n*   **Dependencies**: `psycopg2-binary`, `djangorestframework`, `django-cors-headers`, `gunicorn`\\n\\n## 2. Step 1: Project Setup\\n\\nFirst, set up the basic Django project structure.\\n\\n```bash\\n# 1. Create a project directory\\nmkdir obe-portal-backend && cd obe-portal-backend\\n\\n# 2. Start the Django project and an 'api' app\\n# (Assuming you have Django installed locally to run this command)\\ndjango-admin startproject obe_portal .\\npython manage.py startapp api\\n\\n# 3. Create a requirements.txt file for dependencies\\ntouch requirements.txt\\n```\\n\\nPopulate `requirements.txt` with the following:\\n```\\ndjango\\ndjangorestframework\\npsycopg2-binary\\ndjango-cors-headers\\ngunicorn\\n```\\n\\n## 3. Step 2: Dockerization\\n\\nContainerizing the application with Docker ensures a consistent development and production environment.\\n\\n### Step 2a: Create the Dockerfile\\n\\nCreate a file named `Dockerfile` in the project root:\\n\\n```dockerfile\\n# Use an official Python runtime as a parent image\\nFROM python:3.9-slim\\n\\n# Set environment variables\\nENV PYTHONDONTWRITEBYTECODE 1\\nENV PYTHONUNBUFFERED 1\\n\\n# Set work directory\\nWORKDIR /app\\n\\n# Install dependencies\\nCOPY requirements.txt /app/\\nRUN pip install --upgrade pip\\nRUN pip install -r requirements.txt\\n\\n# Copy project\\nCOPY . /app/\\n```\\n\\n### Step 2b: Create the Docker Compose File\\n\\nCreate a file named `docker-compose.yml` to define and run the multi-container application (backend + database).\\n\\n```yaml\\nversion: '3.8'\\n\\nservices:\\n  db:\\n    image: postgres:13\\n    volumes:\\n      - postgres_data:/var/lib/postgresql/data/\\n    environment:\\n      - POSTGRES_DB=obe_portal_db\\n      - POSTGRES_USER=obe_user\\n      - POSTGRES_PASSWORD=obe_password\\n    ports:\\n      - \\\"5432:5432\\\"\\n\\n  web:\\n    build: .\\n    command: python manage.py runserver 0.0.0.0:8000\\n    volumes:\\n      - .:/app\\n    ports:\\n      - \\\"8000:8000\\\"\\n    environment:\\n      - SECRET_KEY=your_secret_key_for_development_only_change_in_production\\n      - DJANGO_SETTINGS_MODULE=obe_portal.settings\\n      - DB_NAME=obe_portal_db\\n      - DB_USER=obe_user\\n      - DB_PASSWORD=obe_password\\n      - DB_HOST=db\\n      - DB_PORT=5432\\n    depends_on:\\n      - db\\n\\nvolumes:\\n  postgres_data:\\n```\\n\\n### Step 2c: Configure Django Settings\\n\\nModify `obe_portal/settings.py` to be Docker-aware and read from environment variables.\\n\\n```python\\n# obe_portal/settings.py\\nimport os # Add this import\\n\\n# It's recommended to use a custom user model from the start\\nAUTH_USER_MODEL = 'api.User'\\n\\nINSTALLED_APPS = [\\n    # ...\\n    'rest_framework',\\n    'rest_framework.authtoken',\\n    'corsheaders',\\n    'api',\\n]\\n\\nMIDDLEWARE = [\\n    'corsheaders.middleware.CorsMiddleware',\\n    # ...\\n]\\n\\n# Update DATABASES to read from environment variables\\nDATABASES = {\\n    'default': {\\n        'ENGINE': 'django.db.backends.postgresql',\\n        'NAME': os.environ.get('DB_NAME'),\\n        'USER': os.environ.get('DB_USER'),\\n        'PASSWORD': os.environ.get('DB_PASSWORD'),\\n        'HOST': os.environ.get('DB_HOST'),\\n        'PORT': os.environ.get('DB_PORT'),\\n    }\\n}\\n\\nREST_FRAMEWORK = {\\n    'DEFAULT_AUTHENTICATION_CLASSES': [\\n        'rest_framework.authentication.TokenAuthentication',\\n    ],\\n    'DEFAULT_PERMISSION_CLASSES': [\\n        'rest_framework.permissions.IsAuthenticated',\\n    ]\\n}\\n\\n# CORS Settings (for development)\\n# In production, this should be a more restrictive list\\nCORS_ALLOW_ALL_ORIGINS = True \\n```\\n\\n## 4. Step 3: Running the Development Environment\\n\\nWith Docker, starting your entire backend stack is a single command.\\n\\n```bash\\n# Build and start the containers in detached mode\\ndocker-compose up --build -d\\n```\\nYour Django API will now be running and accessible at `http://localhost:8000`.\\n\\n## 5. Step 4: Models & Migrations\\n\\nDefine your relational models in `api/models.py`. These models must be consistent with the frontend's `types.ts` and the provided `schema.sql.txt`. Use `ForeignKey` and `ManyToManyField` to represent relationships. For fields like `section_teacher_ids`, `questions`, and `scores`, Django's `JSONField` is a suitable choice. For `program_coordinator_ids`, an `ArrayField` (from `django.contrib.postgres.fields`) can be used.\\n\\n**Running Migrations**: Use `docker-compose exec` to run commands inside your `web` container.\\n\\n```bash\\n# Generate migration files\\ndocker-compose exec web python manage.py makemigrations\\n\\n# Apply migrations to the database\\ndocker-compose exec web python manage.py migrate\\n```\\n\\n## 6. Step 5: Seeding Initial Data\\n\\nCreate a management command to seed the database from your `mockData.json` or, preferably, by executing the provided `data_insertion.sql.txt` script.\\n\\n**`api/management/commands/seed_data.py`:**\\n\\n```python\\nfrom django.core.management.base import BaseCommand\\nimport json\\nfrom api.models import User, College, Program, Batch, Section # ... and all other models\\n\\nclass Command(BaseCommand):\\n    help = 'Seeds the database with initial data from mockData.json'\\n\\n    def handle(self, *args, **options):\\n        # Clear existing data\\n        # ...\\n        \\n        with open('mockData.json', 'r') as f:\\n            data = json.load(f)\\n\\n        # Seed Colleges, Programs...\\n        \\n        # Seed Batches\\n        for batch_data in data['batches']:\\n            # ...\\n        \\n        # Seed Sections\\n        for section_data in data['sections']:\\n            # ...\\n\\n        # ... (Continue seeding all other data models) ...\\n```\\nRun the seeder command:\\n```bash\\ndocker-compose exec web python manage.py seed_data\\n```\\n\\n## 7. Step 6: Serializers\\n\\nDefine serializers in `api/serializers.py` to convert your Django models into JSON and vice versa. Use `ModelSerializer` for simplicity.\\n\\n```python\\n# api/serializers.py\\nfrom rest_framework import serializers\\nfrom .models import Program, Course, Student\\n\\nclass ProgramSerializer(serializers.ModelSerializer):\\n    class Meta:\\n        model = Program\\n        fields = '__all__'\\n\\n# ... Define serializers for all other models ...\\n```\\n\\n## 8. Step 7: Views, ViewSets, & Filtering Logic\\n\\nThis is where the core API logic resides. Use `ModelViewSet` for standard CRUD operations. The most critical part is overriding `get_queryset` in each ViewSet to enforce role-based data filtering.\\n\\n**Example `api/views.py` with Filtering:**\\n\\n```python\\nfrom rest_framework import viewsets\\nfrom .models import Course\\nfrom .serializers import CourseSerializer\\n\\nclass CourseViewSet(viewsets.ModelViewSet):\\n    serializer_class = CourseSerializer\\n\\n    def get_queryset(self):\\n        \\\"\\\"\\\"\\n        Dynamically filter the queryset based on the user's role and query params.\\n        \\\"\\\"\\\"\\n        user = self.request.user\\n        queryset = Course.objects.all()\\n\\n        # Role-based filtering\\n        if user.role == 'Teacher':\\n            # A more complex query is needed here to check both teacherId and sectionTeacherIds\\n            return queryset.filter(teacherId=user.id) # Simplified example\\n        \\n        elif user.role == 'Program Co-ordinator':\\n            return queryset.filter(program_id=user.program.id)\\n\\n        elif user.role == 'Department':\\n            return queryset.filter(program__college_id=user.college.id)\\n        \\n        # For Admin/University, we allow further filtering via query parameters\\n        program_id = self.request.query_params.get('program_id')\\n        if program_id:\\n            queryset = queryset.filter(program_id=program_id)\\n            \\n        college_id = self.request.query_params.get('college_id')\\n        if college_id:\\n            queryset = queryset.filter(program__college_id=college_id)\\n            \\n        return queryset\\n```\\n\\n## 9. Step 8: URLs & Routing\\n\\nUse DRF's `DefaultRouter` to automatically generate URL patterns for your ViewSets.\\n\\n**`api/urls.py`:**\\n```python\\nfrom django.urls import path, include\\nfrom rest_framework.routers import DefaultRouter\\nfrom .views import ProgramViewSet, CourseViewSet # ... and other viewsets\\n\\nrouter = DefaultRouter()\\nrouter.register(r'programs', ProgramViewSet)\\nrouter.register(r'courses', CourseViewSet)\\n# ... register all other viewsets\\n\\nurlpatterns = [\\n    path('', include(router.urls)),\\n]\\n```\\n\\nInclude these URLs in your main `obe_portal/urls.py`.\\n\\n## 10. Step 9: Authentication & Permissions\\n\\nDRF's token authentication is configured in `settings.py`. To handle role-specific access (e.g., only Admins can delete), create custom permission classes. Refer to the **API Endpoint Cheatsheet** below for a detailed breakdown of the required permission logic for every endpoint and user role.\\n\\n**`api/permissions.py` (Example):**\\n```python\\nfrom rest_framework import permissions\\n\\nclass IsAdminOrReadOnly(permissions.BasePermission):\\n    \\\"\\\"\\\"\\n    Allow all methods for admins, but only safe methods (GET, HEAD, OPTIONS) for others.\\n    \\\"\\\"\\\"\\n    def has_permission(self, request, view):\\n        if request.method in permissions.SAFE_METHODS:\\n            return True\\n        return request.user and request.user.role == 'Admin'\\n\\nclass IsProgramCoordinator(permissions.BasePermission):\\n    def has_permission(self, request, view):\\n        return request.user and request.user.role == 'Program Co-ordinator'\\n```\\nYou can then apply these in your views: `permission_classes = [IsAdminOrReadOnly]`\\n\\n## 11. Step 10: API Endpoint Cheatsheet\\n\\nThis section provides a detailed list of required endpoints, permissions, and filtering logic. The base URL is `/api/`.\\n\\n| Endpoint & Method | Description | Permissions (by Role) | Filtering Logic / Scoping Notes |\\n| :--- | :--- | :--- | :--- |\\n| **`auth/login/`** `POST` | Authenticate user, get auth token. | **Public** (all users). | N/A |\\n| **`auth/user/`** `GET` | Get details of the currently authenticated user. | **Authenticated** (all roles). | Returns the user object for the request user. |\\n| **`app-data/`** `GET` | Get initial bootstrap data for the frontend. | **Authenticated** (all roles). | Data is scoped to the user's role. **Admin/Univ**: All data. **Dept**: Data for their college. **PC**: Data for their program. **Teacher**: Data for their assigned courses. |\\n| **`colleges/`** | CRUD for Colleges. | **GET**: Admin, Univ, Dept. <br> **POST/PATCH/DELETE**: Admin only. | N/A - Returns all colleges. |\\n| **`programs/`** | CRUD for Programs. | **GET**: All roles. <br> **POST/PATCH/DELETE**: Admin only. | **GET Scope**: <br> - **Admin/Univ**: All. Filter by `?college_id=`. <br> - **Dept**: Programs in their college. <br> - **PC**: Their assigned program. <br> - **Teacher**: Associated programs. |\\n| **`batches/`** | CRUD for Batches. | **GET**: All roles. <br> **POST/PATCH/DELETE**: Admin only. | **GET Scope**: Must be filtered by `?program_id=`. Access follows program permissions. |\\n| **`sections/`** | CRUD for Sections. | **GET**: All roles. <br> **POST/PATCH/DELETE**: Admin, Department. | **GET Scope**: Must be filtered by `?batch_id=`. <br> **Write Scope**: Dept can only manage sections in their college. |\\n| **`courses/`** | CRUD for Courses. | **GET**: All roles. <br> **POST**: Admin, PC. <br> **PATCH**: Admin, PC, Dept, assigned Teacher. <br> **DELETE**: Admin, PC. | **GET Scope**: <br> - **Admin/Univ**: All. Filter by `?college_id=`, `?program_id=`. <br> - **Dept**: Courses in their college. <br> - **PC**: Courses in their program. <br> - **Teacher**: Assigned courses only. <br> **Write Scope**: Dept/PC/Teacher restricted to their scope. |\\n| **`students/`** | CRUD for Students. | **GET**: All roles. <br> **POST**: Admin, PC, Department. <br> **PATCH**: Admin, PC, Department. <br> **DELETE**: Admin only. | **GET Scope**: <br> - **Admin/Univ**: All. Filter by `?college_id=`, `?program_id=`, `?batch_name=`. <br> - **Dept**: Students in their college. <br> - **PC/Teacher**: Students in their program. <br> **Write Scope**: Dept/PC restricted to their college/program. |\\n| **`users/`** | CRUD for Users. | **GET**: Admin, Dept, PC. <br> **POST/PATCH/DELETE**: Admin only. | **GET Scope**: <br> - **Admin**: All users. <br> - **Dept**: PCs and Teachers in their college. <br> - **PC**: Teachers they manage. |\\n| **`course-outcomes/`** | CRUD for Course Outcomes. | **GET**: All roles. <br> **POST/PATCH/DELETE**: Admin, PC, assigned Teacher. | Must be filtered by `?course_id=`. Write access only if user has rights to the course. |\\n| **`program-outcomes/`** | CRUD for Program Outcomes. | **GET**: All roles. <br> **POST/PATCH/DELETE**: Admin, PC. | Must be filtered by `?program_id=`. Write access only if user has rights to the program. |\\n| **`co-po-mapping/`** | CRUD for CO-PO mapping. | **GET**: All roles. <br> **POST/PATCH/DELETE**: Admin, PC, assigned Teacher. | Must be filtered by `?course_id=`. Write access only if user has rights to the course. |\\n| **`assessments/`** | CRUD for Assessments. | **GET**: All roles. <br> **POST/PATCH/DELETE**: Admin, PC, assigned Teacher. | Must be filtered by `?section_id=`. Write access only if user has rights to the section's course. |\\n| **`marks/`** | CRUD for student marks. | **GET**: All roles. <br> **POST/PATCH**: Admin, PC, assigned Teacher. | `GET` filtered by `?assessment_id=`. `POST/PATCH` requires `assessment_id` in payload. Write access only if user has rights to the assessment. |\\n| **`reports/po-attainment/`** `GET` | **Calculated**: Get PO attainment data. | **GET only**: Admin, Univ, Dept, PC. | Requires `?program_id=` and `?batch_name=`. Performs complex aggregation on the backend. |\\n| **`reports/co-attainment/`** `GET` | **Calculated**: Get CO attainment data. | **GET only**: Admin, Dept, PC, assigned Teacher. | Requires `?course_id=`. Optional `?section_id=`. Performs complex aggregation on the backend. |\\n\\n\\n## 12. Step 11: Frontend Refactoring Strategy\\n\\n1.  **Create an API Client**: Use a library like `axios` to create a centralized API client that automatically attaches the auth token to headers. Set the `baseURL` to `http://localhost:8000/api`.\\n2.  **Replace `fetch('./mockData.json')`**: In `AppContext.tsx`, replace the `fetch` call with a request to your new `/api/app-data/` endpoint. This will provide the initial state.\\n3.  **Replace `setData` Calls**: Go through every component that calls `setData`. Replace these client-side state mutations with API calls (e.g., `apiClient.patch('/courses/C101/', { status: 'Active' })`). After a successful API call, you'll need to re-fetch the relevant data to update the UI.\\n\\n## 13. Step 12: Deployment Considerations\\n\\nDocker significantly simplifies deployment.\\n\\n*   **Production `docker-compose.yml`**: Create a separate `docker-compose.prod.yml` that uses `gunicorn` instead of the Django development server and doesn't mount local volumes.\\n*   **Environment Variables**: Instead of hardcoding, use your hosting provider's secrets management (e.g., AWS Secrets Manager, GitHub Actions Secrets) to inject environment variables into your containers at runtime. **Never commit production secrets.**\\n*   **Web Server/Reverse Proxy**: Use `Nginx` in another Docker container to act as a reverse proxy. It will handle incoming traffic on ports 80/443, manage SSL termination, and forward requests to your Gunicorn container.\\n*   **Static Files**: Your `Dockerfile` for production should include a step to run `python manage.py collectstatic`. The Nginx container should mount the static files volume to serve them directly, which is much more efficient.",
  "changelog.md": "# Changelog\\n\\nThis document tracks all significant changes made to the NBA Outcome Based Education Portal application.\\n\\n## [Unreleased] - 2024-07-30\\n\\n### Feature: Comprehensive Documentation & Backend Asset Finalization\\n- **Docs**: Completed a full pass to add extensive, beginner-friendly comments to every single file (`.ts`, `.tsx`) in the codebase, explaining the purpose of each component, function, and complex logic.\\n- **Docs**: Created and finalized a `fileguide.md` to provide a high-level overview of every file's role in the application.\\n- **Docs**: Created and finalized a `flowchart.md` with a Mermaid diagram to visually represent the entire application architecture, data flow, and user navigation paths.\\n- **Docs**: Reviewed and polished the `backend_guide.md` to ensure it is a complete and accurate blueprint for backend development, including a detailed API endpoint cheatsheet.\\n- **New**: Created `schema.sql.txt`, a file containing the complete `CREATE TABLE` statements for a PostgreSQL database, providing a ready-to-use database schema.\\n- **New**: Created `data_insertion.sql.txt`, a file containing all the `INSERT INTO` statements required to populate the database with the exact data from `mockData.json`, enabling rapid backend setup.\\n- **Refactor**: Unified the main `Dashboard.tsx` to act as a \"smart router\", displaying a dedicated `TeacherDashboard` for teachers and the statistical view for all other roles.\\n- **Feature**: Implemented a full-featured, interactive \"Attainment Reports\" page with a tile-based dashboard, contextual controls, and PDF download functionality for multiple report types.\\n\\n## [Unreleased] - 2024-07-28\\n\\n### Feature: Centralized Batch Management & Program Durations\\n- **New**: Admins can now define a `duration` (in years) for each academic program under the \"Academic Structure\" panel.\\n- **New**: A \"Manage Batches\" section has been added for Admins to create and delete batches for each program. Batch names (e.g., \"2025-2029\") are automatically calculated based on the program's duration.\\n- **Refactor**: The application now uses this central list of admin-created batches. Dynamic generation of batch years has been removed from the Sidebar and Batch Selection Modal.\\n- **Refactor**: All components have been updated to use the new `Batch` data model, ensuring a consistent academic structure across the application when filtering or assigning students.\\n- **Data Model**: Updated `types.ts` to include `Program.duration`, a new `Batch` interface, and changed `Section.batch` to `Section.batchId`. The `mockData.json` has been updated accordingly to reflect this new structure.\\n\\n## [Unreleased] - 2024-07-27\\n\\n### Mock Data and Documentation Update\\n- **Fixed**: Populated `mockData.json` with generated students, enrollments, and marks data. This resolves issues where student lists, CO attainment reports, and other data-dependent components were appearing empty.\\n- **Docs**: Updated `backend_guide.md` with a more detailed section on defining database schemas using Django models and a clearer explanation of the data migration process.\\n\\n## [Unreleased] - 2024-07-26\\n\\n### Data Loading Refactor\\n- Converted static `mockData.ts` to `mockData.json`.\\n- Updated `AppContext` to fetch data asynchronously, showing a loading screen on initial startup.\\n- Removed client-side generation logic for students, enrollments, and marks, as the `mockData.json` file is now complete. This simplifies the data loading process and ensures consistency.\\n\\n## [Unreleased] - 2024-07-25\\n\\n### Major Refactoring: Assessments moved from Course-level to Section-level\\n\\nThis architectural change provides a more granular approach to managing and evaluating student assessments, aligning them with specific class sections rather than general courses.\\n\\n#### File Changes:\\n\\n*   **`types.ts`**:\\n    *   **Modified**: Updated the `Assessment` interface.\\n    *   **Change**: Replaced the `courseId: string` property with `sectionId: string`.\\n\\n*   **`mockData.ts`**:\\n    *   **Modified**: Updated the mock `assessments` array.\\n    *   **Change**: Re-associated all mock assessments with a specific `sectionId` instead of a `courseId`.\\n\\n*   **`components/ManageCourseAssessments.tsx`**:\\n    *   **Heavily Refactored**: This component now orchestrates assessment management at the section level.\\n    *   **Change**:\\n        *   Added a \"Select Section\" dropdown to filter assessments.\\n        *   Dropdown population is role-based (Teachers see their assigned sections; PCs/Admins see all sections for the course).\\n        *   Assessment list now filters based on the selected `sectionId`.\\n        *   The \"Create Assessment\" button is disabled until a section is selected.\\n        *   Manages navigation to `AssessmentDetails` and preserves the selected section context for PC/Admin roles.\\n\\n*   **`components/CreateAssessmentModal.tsx`**:\\n    *   **Modified**: Updated the component's props.\\n    *   **Change**: The modal now accepts `sectionId` instead of `courseId` to correctly associate newly created assessments.\\n\\n*   **`components/AssessmentDetails.tsx`**:\\n    *   **Heavily Refactored**: Adapted the component to a section-centric data model.\\n    *   **Change**:\\n        *   Now receives the parent `course` object as a prop to maintain context.\\n        *   For PCs/Admins, the \"Select Section\" dropdown from the parent component remains visible for easy navigation between sections.\\n        *   Logic for downloading mark templates and uploading marks is now scoped to the students enrolled in the assessment's specific section.\\n\\n*   **`pages/StudentCOAttainmentReport.tsx`**:\\n    *   **Fixed**: Corrected a data filtering error.\\n    *   **Change**: Updated logic to retrieve assessments by first finding all sections for a course (via enrollments) and then filtering assessments by those `sectionId`s, instead of the non-existent `courseId`.\\n\\n*   **`components/StudentDetailsModal.tsx`**:\\n    *   **Fixed**: Corrected a data filtering error.\\n    *   **Change**: Similar to the report page, updated assessment retrieval logic to be section-aware.\\n\\n*   **`pages/TeacherDetails.tsx`**:\\n    *   **Fixed**: Corrected a data filtering error.\\n    *   **Change**: Updated assessment retrieval logic to be section-aware for displaying teacher-specific information.\\n\\n*   **`components/CoursePoLinkageDashboard.tsx`**:\\n    *   **Fixed**: Corrected a data filtering error.\\n    *   **Change**: Updated assessment retrieval logic to be section-aware for accurate CO attainment calculations.",
  "mockData.ts": "/**\n * @file mockData.ts\n * @description\n * This file is intentionally left empty.\n *\n * Why is it empty? A little history story!\n * Imagine this file was our first, handwritten recipe book for all the data in our application\n * (like a list of users, courses, etc.). It worked, but it was a bit clunky.\n *\n * We decided to upgrade to a much nicer, professionally printed cookbook called `mockData.json`.\n * This new cookbook is better because the application can \"read\" from it in a way that is\n * more like how a real application gets its data from the internet. It even allows us to\n * show a \"Loading...\" screen while the app is \"reading the recipe,\" which is more realistic.\n *\n * So, why do we keep this old, empty recipe book around?\n * It's kept here just in case some very old part of our code still remembers it. By keeping the\n * file here, we prevent the app from showing an error like \"I can't find the old recipe book!\".\n *\n * In short: This file is a relic of the past and is no longer used for cooking (running the app).\n * It's considered **deprecated**.\n */",
  "pages/SettingsScreen.tsx": "/**\n * @file SettingsScreen.tsx\n * @description\n * This file defines the `SettingsScreen` component.\n *\n * **NOTE: This is an older, deprecated component and is no longer actively used in the application.**\n *\n * What was its purpose?\n * Imagine this page was the first, simple control panel we built for the application's boss (the Admin).\n * It had a few switches and buttons for managing things like colleges and programs.\n *\n * Why is it no longer used?\n * We realized the boss needed a much bigger, better, and more organized control room. So, we built the\n * `AdminPanel`. This new panel has separate, dedicated sections for everything:\n * - `components/admin/AdminAcademicStructureTab.tsx` (for managing colleges, programs, and batches)\n * - `components/admin/AdminSystemSettingsTab.tsx` (for managing system-wide defaults)\n *\n * All the switches and buttons from this old, messy control panel were moved to the new `AdminPanel`.\n * This old room is now empty and unused.\n *\n * This file is kept in the codebase just in case an old wire is still connected to it, to prevent\n * the app from showing an error. It can be safely removed in a future cleanup.\n */\n\n// We still need to import React to define a React component.\nimport React from 'react';\n\n// This is the main (and now deprecated) component for the Settings Screen.\nconst SettingsScreen: React.FC = () => {\n  return (\n    // The component renders a simple placeholder message explaining that its features have moved.\n    <div className=\"space-y-6\">\n      <h1 className=\"text-3xl font-bold text-gray-800\">Settings (Deprecated)</h1>\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h2 className=\"text-xl font-semibold text-gray-700 mb-4\">Manage Colleges</h2>\n        <p className=\"text-gray-600\">This functionality has been moved to the Admin Panel under \"Academic Structure\".</p>\n      </div>\n       <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h2 className=\"text-xl font-semibold text-gray-700 mb-4\">Manage Programs</h2>\n        <p className=\"text-gray-600\">This functionality has been moved to the Admin Panel under \"Academic Structure\".</p>\n      </div>\n    </div>\n  );\n};\n\nexport default SettingsScreen;",
  "components/AddCourseModal.tsx": "/**\n * @file AddCourseModal.tsx\n * @description\n * This file defines the `AddCourseModal` component.\n *\n * **NOTE: This is an older, deprecated component and is no longer actively used in the application.**\n *\n * What was its purpose?\n * Imagine our app is a big library. This component was like a small pop-up window that would appear\n * whenever you wanted to add one new book (a \"Course\") to the library. You would fill out the\n * book's details in the pop-up and click \"Add\".\n *\n * Why is it no longer used?\n * We found that having to open a pop-up every time was a bit slow. Instead, we built a special\n * \"intake desk\" (an inline form) right at the top of the main library room (`pages/CoursesList.tsx`).\n * Now, you can add a new book right from the main page without any pop-ups. It's much faster and\n * more convenient.\n *\n * Because we have this new, better system, this old pop-up window is no longer needed. It's kept\n * here for historical reasons but can be safely removed in a future cleanup.\n */\n\nimport React, { useState } from 'react';\nimport { Course } from '../types';\nimport Modal from './Modal'; // It used the generic Modal component as a base.\n\n// This defines the \"props\" or properties the component was designed to accept.\ninterface AddCourseModalProps {\n  onClose: () => void; // A function to close the modal.\n  onAdd: (course: Course) => void; // A function to pass the newly created course back to the parent.\n  programId: string; // The ID of the program the new course would belong to.\n}\n\n// This is the main (and now deprecated) component function.\nconst AddCourseModal: React.FC<AddCourseModalProps> = ({ onClose, onAdd, programId }) => {\n    // It used its own internal memory (`useState`) for the form fields.\n    const [code, setCode] = useState('');\n    const [name, setName] = useState('');\n    const [target, setTarget] = useState(50);\n\n    // This function ran when the form was submitted.\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault(); // Stop the page from reloading.\n        \n        // It would create a new `Course` object with some default values.\n        const newCourse: Course = {\n            id: `c_manual_${Date.now()}`,\n            programId,\n            code,\n            name,\n            target,\n            internalWeightage: 25,\n            externalWeightage: 75,\n            attainmentLevels: { level3: 80, level2: 70, level1: 50 },\n            status: 'Future', // New courses always started as 'Future'.\n        };\n        // It would then call the `onAdd` function passed from its parent to add the course.\n        onAdd(newCourse);\n    }\n\n    return (\n        // The component rendered a form inside the generic `Modal` wrapper.\n        <Modal title=\"Add New Course\" onClose={onClose}>\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n                 <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Course Code</label>\n                    <input type=\"text\" value={code} onChange={e => setCode(e.target.value)} className=\"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" required/>\n                </div>\n                 <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Course Name</label>\n                    <input type=\"text\" value={name} onChange={e => setName(e.target.value)} className=\"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" required/>\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Target Attainment (%)</label>\n                    <input type=\"number\" value={target} onChange={e => setTarget(Number(e.target.value))} className=\"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" required/>\n                </div>\n                <div className=\"flex justify-end pt-4\">\n                    <button type=\"button\" onClick={onClose} className=\"mr-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg\">Cancel</button>\n                    <button type=\"submit\" className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg\">Add Course</button>\n                </div>\n            </form>\n        </Modal>\n    )\n}\n\nexport default AddCourseModal;",
  "components/AssignCoursesModal.tsx": "/**\n * @file AssignCoursesModal.tsx\n * @description\n * This file defines the `AssignCoursesModal` component.\n *\n * **NOTE: This is an older, deprecated component and is no longer actively used in the application.**\n *\n * What was its purpose?\n * Imagine our app is a big library. This component was like a pop-up clipboard that a manager\n * (a \"Program Co-ordinator\") would use. They would pick a librarian (a \"Teacher\"), and this\n * clipboard would pop up, showing a list of all the unassigned books (Courses). The manager\n * could then check off which books to assign to that librarian.\n *\n * Why is it no longer used?\n * We found that using a separate clipboard for this was inefficient. Instead, we went to the main\n * list of all books (`pages/CoursesList.tsx`) and added a little dropdown menu next to each book.\n * Now, the manager can just pick a librarian's name from the dropdown right next to the book.\n * It's much faster and easier to see who is assigned to what at a glance.\n *\n * Because this new system is in place, this old pop-up clipboard is no longer needed.\n */\n\nimport React, { useState, useMemo } from 'react';\nimport { useAppContext } from '../hooks/useAppContext';\nimport { User, Course } from '../types';\nimport Modal from './Modal'; // It used the generic Modal component as a base.\n\n// This defines the \"props\" or properties the component was designed to accept.\ninterface AssignCoursesModalProps {\n    teacher: User; // The teacher to whom the courses would be assigned.\n    onClose: () => void; // A function to close the modal.\n}\n\n// This is the main (and now deprecated) component function.\nconst AssignCoursesModal: React.FC<AssignCoursesModalProps> = ({ teacher, onClose }) => {\n    // It got its data and tools from the \"magic backpack\".\n    const { data, setData, currentUser } = useAppContext();\n    // It used its own memory (`useState`) to keep track of which courses were checked.\n    const [selectedCourseIds, setSelectedCourseIds] = useState<string[]>([]);\n\n    // It calculated the list of available, unassigned courses for the PC's program.\n    const unassignedCourses = useMemo(() => {\n        if (!currentUser?.programId) return [];\n        return data.courses.filter(c => c.programId === currentUser.programId && !c.teacherId);\n    }, [data.courses, currentUser]);\n\n    // This function handled checking and unchecking the boxes.\n    const handleToggleSelection = (courseId: string) => {\n        setSelectedCourseIds(prev =>\n            prev.includes(courseId) ? prev.filter(id => id !== courseId) : [...prev, courseId]\n        );\n    };\n\n    // This function ran when the \"Assign\" button was clicked.\n    const handleAssignCourses = () => {\n        // It updated the main application data by setting the `teacherId` on the selected courses.\n        setData(prev => ({\n            ...prev,\n            courses: prev.courses.map(c =>\n                selectedCourseIds.includes(c.id) ? { ...c, teacherId: teacher.id } : c\n            )\n        }));\n        onClose(); // Close the modal.\n    };\n\n    return (\n        // The component rendered a list of checkboxes inside the generic `Modal` wrapper.\n        <Modal title={`Assign Courses to ${teacher.name}`} onClose={onClose}>\n            <div className=\"p-6\">\n                <div className=\"space-y-2 max-h-80 overflow-y-auto pr-2\">\n                    {unassignedCourses.length > 0 ? (\n                        unassignedCourses.map(course => (\n                            <label key={course.id} className=\"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer\">\n                                <input\n                                    type=\"checkbox\"\n                                    checked={selectedCourseIds.includes(course.id)}\n                                    onChange={() => handleToggleSelection(course.id)}\n                                    className=\"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"\n                                />\n                                <span className=\"ml-3 text-gray-800 font-medium\">{course.code} - {course.name}</span>\n                            </label>\n                        ))\n                    ) : (\n                        <p className=\"text-center text-gray-500 py-4\">No unassigned courses available in this program.</p>\n                    )}\n                </div>\n                <div className=\"mt-6 flex justify-end gap-4\">\n                    <button type=\"button\" onClick={onClose} className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 font-semibold\">Cancel</button>\n                    <button\n                        type=\"button\"\n                        onClick={handleAssignCourses}\n                        disabled={selectedCourseIds.length === 0}\n                        className=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-semibold disabled:bg-indigo-300 disabled:cursor-not-allowed\"\n                    >\n                        Assign ({selectedCourseIds.length})\n                    </button>\n                </div>\n            </div>\n        </Modal>\n    );\n};\n\nexport default AssignCoursesModal;",
  "pages/UserManagement.tsx": "/**\n * @file UserManagement.tsx\n * @description\n * This file defines the `UserManagement` component.\n *\n * **NOTE: This is an older, deprecated component and is no longer actively used in the application.**\n *\n * What was its purpose?\n * Think of this page as the company's original, simple Human Resources (HR) office. It was a place where\n * the main boss (the \"Admin\") could go to do two specific jobs:\n * 1. Assign a manager (\"Program Co-ordinator\") to a specific department (\"Program\").\n * 2. Assign an employee (\"Teacher\") to report to a specific manager.\n *\n * Why is it no longer used?\n * We built a brand new, much bigger, and more powerful HR department for the boss. This new office is\n * now a part of the main `AdminPanel` and is called `components/admin/AdminUserManagementTab.tsx`.\n *\n * The new HR office can do everything this old one could, plus a lot more! It allows the boss to:\n * - Create brand new employees from scratch.\n * - Edit every detail about an employee (not just their assignments).\n * - Delete employees.\n * - Manage every type of role (not just PCs and Teachers).\n *\n * Because the new HR office is so much better, this old one is now closed and no longer used.\n */\n\nimport React, { useMemo, useState, useEffect } from 'react';\nimport { useAppContext } from '../hooks/useAppContext';\nimport { User, Program } from '../types';\nimport SaveBar from '../components/SaveBar';\n\n// This is the main (and now deprecated) component function.\nconst UserManagement: React.FC = () => {\n    // It got its data and tools from the \"magic backpack\".\n    const { data, setData, currentUser } = useAppContext();\n\n    // It calculated the lists of PCs, teachers, and programs.\n    const { programCoordinators, teachers, programs } = useMemo(() => ({\n        programCoordinators: data.users.filter(u => u.role === 'Program Co-ordinator'),\n        teachers: data.users.filter(u => u.role === 'Teacher'),\n        programs: data.programs,\n    }), [data]);\n\n    // It used a \"draft state\" to manage unsaved changes for assignments.\n    const [draftPcAssignments, setDraftPcAssignments] = useState<{ [programId: string]: string }>({});\n    const [initialPcAssignments, setInitialPcAssignments] = useState<{ [programId: string]: string }>({});\n    const [draftTeacherAssignments, setDraftTeacherAssignments] = useState<{ [teacherId: string]: string[] }>({});\n    const [initialTeacherAssignments, setInitialTeacherAssignments] = useState<{ [teacherId: string]: string[] }>({});\n\n    // It loaded the initial assignment data into its draft state when it first appeared.\n    useEffect(() => {\n        // Init PC assignments\n        const pcAssignments: { [programId: string]: string } = {};\n        programs.forEach(p => {\n            const assignedPC = programCoordinators.find(pc => pc.programId === p.id);\n            pcAssignments[p.id] = assignedPC ? assignedPC.id : '';\n        });\n        setDraftPcAssignments(pcAssignments);\n        setInitialPcAssignments(pcAssignments);\n\n        // Init Teacher assignments\n        const teacherAssignments: { [teacherId: string]: string[] } = {};\n        teachers.forEach(t => {\n            teacherAssignments[t.id] = t.programCoordinatorIds || [];\n        });\n        setDraftTeacherAssignments(teacherAssignments);\n        setInitialTeacherAssignments(teacherAssignments);\n    }, [programs, programCoordinators, teachers]);\n\n    // It checked if there were any unsaved changes to show the SaveBar.\n    const isDirty = useMemo(() => \n        JSON.stringify(draftPcAssignments) !== JSON.stringify(initialPcAssignments) ||\n        JSON.stringify(draftTeacherAssignments) !== JSON.stringify(initialTeacherAssignments),\n    [draftPcAssignments, initialPcAssignments, draftTeacherAssignments, initialTeacherAssignments]);\n\n\n    // Handlers for changing the dropdowns, which would update the draft state.\n    const handleProgramAssignmentChange = (programId: string, pcId: string) => {\n        setDraftPcAssignments(prev => ({...prev, [programId]: pcId}));\n    };\n    \n    const handleTeacherAssignmentChange = (teacherId: string, pcId: string) => {\n        setDraftTeacherAssignments(prev => ({...prev, [teacherId]: pcId ? [pcId] : []}));\n    };\n\n    // The save handler, which would update the main application data.\n    const handleSave = () => {\n        setData(prev => {\n            const updatedUsers = prev.users.map(user => {\n                let updatedUser = { ...user };\n                \n                // Apply PC assignment changes\n                if (updatedUser.role === 'Program Co-ordinator') {\n                    const assignedProgramId = Object.keys(draftPcAssignments).find(\n                        progId => draftPcAssignments[progId] === updatedUser.id\n                    );\n                    if (assignedProgramId) {\n                        updatedUser.programId = assignedProgramId;\n                    } else if (updatedUser.programId && !Object.values(draftPcAssignments).includes(updatedUser.id)) {\n                        delete (updatedUser as Partial<User>).programId;\n                    }\n                }\n                \n                // Apply Teacher assignment changes\n                if (updatedUser.role === 'Teacher') {\n                    if (draftTeacherAssignments[updatedUser.id] !== undefined) {\n                        updatedUser.programCoordinatorIds = draftTeacherAssignments[updatedUser.id];\n                    }\n                }\n                \n                return updatedUser;\n            });\n            return { ...prev, users: updatedUsers };\n        });\n        \n        setInitialPcAssignments(draftPcAssignments);\n        setInitialTeacherAssignments(draftTeacherAssignments);\n        alert(\"User assignments saved!\");\n    };\n    \n    // The cancel handler, which would discard all changes.\n    const handleCancel = () => {\n        setDraftPcAssignments(initialPcAssignments);\n        setDraftTeacherAssignments(initialTeacherAssignments);\n    };\n\n    // A security check to ensure only Admins could see this page.\n    if (currentUser?.role !== 'Admin') {\n        return (\n            <div className=\"text-center p-8 bg-white rounded-lg shadow-md\">\n                <h1 className=\"text-2xl font-bold text-red-600\">Access Denied</h1>\n                <p className=\"text-gray-500 mt-2\">You do not have permission to view this page.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-8 pb-20\">\n            <h1 className=\"text-3xl font-bold text-gray-800\">User Management (Deprecated)</h1>\n            {/* The rest of the component's UI for displaying the assignment tables would go here,\n                but since it's deprecated, we are only showing the title. */}\n            <p className=\"p-4 bg-yellow-100 text-yellow-800 rounded-lg\">\n                This page is no longer in use. All user management is now handled in the \"User Management\"\n                section of the Admin Panel.\n            </p>\n            <SaveBar isDirty={isDirty} onSave={handleSave} onCancel={handleCancel} />\n        </div>\n    );\n};\n\nexport default UserManagement;"
}